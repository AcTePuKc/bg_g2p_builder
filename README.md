# üáßüá¨ Bulgarian G2P Dataset Builder

![Banner](images/image.png)

–¢–æ–∑–∏ –ø—Ä–æ–µ–∫—Ç —Å—ä–∑–¥–∞–≤–∞ –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–µ–Ω —Ä–µ—á–Ω–∏–∫ –∑–∞ **Grapheme-to-Phoneme (G2P)**, –Ω–µ–æ–±—Ö–æ–¥–∏–º –∑–∞ —Ç—Ä–µ–Ω–∏—Ä–∞–Ω–µ –Ω–∞ –º–æ–¥–µ–ª–∏ –∑–∞ —Å–∏–Ω—Ç–µ–∑ –Ω–∞ —Ä–µ—á (TTS) –Ω–∞ –±—ä–ª–≥–∞—Ä—Å–∫–∏ –µ–∑–∏–∫.

–°—ä–∑–¥–∞–¥–µ–Ω —Å ‚ù§Ô∏è –∑–∞ –±—ä–ª–≥–∞—Ä—Å–∫–∞—Ç–∞ Open-Source –æ–±—â–Ω–æ—Å—Ç.

## üìñ –í—ä–≤–µ–¥–µ–Ω–∏–µ

–¢–æ–∑–∏ –ø—Ä–æ–µ–∫—Ç —Å—ä–¥—ä—Ä–∂–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –∑–∞ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –≤–∏—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω **G2P (Grapheme-to-Phoneme)** —Ä–µ—á–Ω–∏–∫ –∑–∞ –±—ä–ª–≥–∞—Ä—Å–∫–∏ –µ–∑–∏–∫.  
–¶–µ–ª—Ç–∞ –µ –¥–∞ —Å–µ –ø—Ä–µ–≤—ä—Ä–Ω–∞—Ç –¥—É–º–∏—Ç–µ (–Ω–∞–ø—Ä. ‚Äû–≤—ä–ª–Ω–∞‚Äú) –≤ —Ñ–æ–Ω–µ—Ç–∏—á–Ω–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è (IPA: `v …§ …´ n Àà a`), –∏–∑–ø–æ–ª–∑–≤–∞–Ω–∞ –∑–∞ —Ç—Ä–µ–Ω–∏—Ä–∞–Ω–µ –Ω–∞ –º–æ–¥–µ–ª–∏ –∑–∞ —Å–∏–Ω—Ç–µ–∑ –Ω–∞ —Ä–µ—á (TTS).

## üéØ –ó–∞—â–æ –Ω–∏ —Ç—Ä—è–±–≤–∞ —Ç–æ–≤–∞?

–ë—ä–ª–≥–∞—Ä—Å–∫–∏—è—Ç –µ–∑–∏–∫ –∏–º–∞ –ø–æ–¥–≤–∏–∂–Ω–æ —É–¥–∞—Ä–µ–Ω–∏–µ –∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∏ –ø—Ä–∞–≤–∏–ª–∞ –∑–∞ –æ–±–µ–∑–∑–≤—É—á–∞–≤–∞–Ω–µ, –∫–æ–∏—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ —á–µ—Å—Ç–æ –±—ä—Ä–∫–∞—Ç. –¢–æ–∑–∏ –Ω–∞–±–æ—Ä –æ—Ç —Å–∫—Ä–∏–ø—Ç–æ–≤–µ:

1. –ò–∑–≤–ª–∏—á–∞ **–ø—Ä–æ–≤–µ—Ä–µ–Ω–∏ –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏—è** –æ—Ç Wiktionary.  
2. –ò–∑–≤–ª–∏—á–∞ **—É–¥–∞—Ä–µ–Ω–∏—è** –æ—Ç –ß–∏—Ç–∞–Ω–∫–∞ / Alpaca dataset.  
3. –ò–∑–ø–æ–ª–∑–≤–∞ `Espeak-NG` –∑–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞ –ª–∏–ø—Å–≤–∞—â–∏—Ç–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏.  
4. **–ü–æ–ø—Ä–∞–≤—è —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–Ω–∏ –≥—Ä–µ—à–∫–∏** –Ω–∞ eSpeak-NG (–Ω–∞–ø—Ä. –∑–∞–º–µ–Ω—è `…ô` —Å `…§` —Å–ø–æ—Ä–µ–¥ –∞–∫–∞–¥–µ–º–∏—á–Ω–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç).  
5. –û–±—Ä–∞–±–æ—Ç–≤–∞ **–æ–º–æ–≥—Ä–∞—Ñ–∏** (–¥—É–º–∏ —Å –µ–¥–Ω–∞–∫—ä–≤ –ø—Ä–∞–≤–æ–ø–∏—Å, –Ω–æ —Ä–∞–∑–ª–∏—á–Ω–æ —É–¥–∞—Ä–µ–Ω–∏–µ: *–≤—äÃÄ–ª–Ω–∞* vs *–≤—ä–ª–Ω–∞ÃÄ*).

## üë• –ó–∞ –∫–æ–≥–æ –µ —Ç–æ–∑–∏ –ø—Ä–æ–µ–∫—Ç?

–¢–æ–∑–∏ —Ä–µ—á–Ω–∏–∫ –µ –ø–æ–ª–µ–∑–µ–Ω –∞–∫–æ:

- —Ç—Ä–µ–Ω–∏—Ä–∞—Ç–µ **TTS –º–æ–¥–µ–ª** –∑–∞ –±—ä–ª–≥–∞—Ä—Å–∫–∏ –µ–∑–∏–∫;  
- –ø—Ä–∞–≤–∏—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω **G2P –º–æ–¥–µ–ª** (–Ω–∞–ø—Ä. —Å Goruut, Phonetisaurus –∏ –¥—Ä.);  
- –∏—Å–∫–∞—Ç–µ **—Å—Ç–∞–±–∏–ª–Ω–∞ IPA –±–∞–∑–∞** –∑–∞ –ª–∏–Ω–≥–≤–∏—Å—Ç–∏—á–Ω–∏ –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏ –∏–ª–∏ QA.

## üìö –û–±—è—Å–Ω–µ–Ω–∏–µ –Ω–∞ –∏–∑—Ç–æ—á–Ω–∏—Ü–∏—Ç–µ (–∏ –∫–∞–∫–≤–æ –¥–∞ –ø—Ä–∞–≤–∏–º, –∞–∫–æ –∏–∑—á–µ–∑–Ω–∞—Ç)

–¢–æ–∑–∏ –ø—Ä–æ–µ–∫—Ç —Ä–∞–∑—á–∏—Ç–∞ –Ω–∞ –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω–∏ –ø—Ä–æ–µ–∫—Ç–∞. –ê–∫–æ —Ç–µ –∏–∑—á–µ–∑–Ω–∞—Ç, –µ—Ç–æ –∫–∞–∫ –¥–∞ –≥–∏ –∑–∞–º–µ–Ω–∏—Ç–µ:

### 1. Wiktionary (–£–∏–∫–∏—Ä–µ—á–Ω–∏–∫)

- **–ö–∞–∫–≤–æ –µ:** –°–≤–æ–±–æ–¥–µ–Ω —Ä–µ—á–Ω–∏–∫, –ø–æ–¥–¥—ä—Ä–∂–∞–Ω –æ—Ç –¥–æ–±—Ä–æ–≤–æ–ª—Ü–∏. –ù–∞–π-—Ü–µ–Ω–Ω–æ—Ç–æ –∑–∞ –Ω–∞—Å –≤ –Ω–µ–≥–æ —Å–∞ –≥–æ—Ç–æ–≤–∏—Ç–µ IPA —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏.  
- **–ö–∞–∫ –≥–æ –ø–æ–ª–∑–≤–∞–º–µ:** –ß—Ä–µ–∑ –ø—Ä–æ–µ–∫—Ç–∞ [Kaikki.org](https://kaikki.org/dictionary/Bulgarian/), –∫–æ–π—Ç–æ –ø—Ä–µ–≤—Ä—ä—â–∞ –£–∏–∫–∏—Ä–µ—á–Ω–∏–∫ –≤ —É–¥–æ–±–µ–Ω JSONL —Ñ–æ—Ä–º–∞—Ç.  
  - –õ–∏–Ω–∫ –∫—ä–º –¥—ä–º–ø–∞: [Bulgarian JSONL](https://kaikki.org/dictionary/Bulgarian/jsonl/Bulgarian.jsonl.gz)

- **üÜò –ê–∫–æ –ª–∏–Ω–∫—ä—Ç —É–º—Ä–µ:**
    1. –ü–æ—Å–µ—Ç–µ—Ç–µ –æ—Å–Ω–æ–≤–Ω–∏—è —Å–∞–π—Ç [kaikki.org](https://kaikki.org).
    2. –ù–∞–º–µ—Ä–µ—Ç–µ ‚ÄûBulgarian‚Äú –∏ —Å–∫—Ä–æ–ª–Ω–µ—Ç–µ –¥–æ —Å–µ–∫—Ü–∏—è—Ç–∞ **Download**.
    3. –ê–∫–æ –∏ —Ç–∞–º –ª–∏–ø—Å–≤–∞ —Ñ–∞–π–ª—ä—Ç, –ø–æ—Ç—ä—Ä—Å–µ—Ç–µ ‚ÄûWiktionary dump parse‚Äú –≤ GitHub –∏–ª–∏ Google.  

### 2. Hugging Face Datasets (Chitanka/Alpaca)

- **–ö–∞–∫–≤–æ –µ:** –ò–∑–ø–æ–ª–∑–≤–∞–º–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ç–∞ `datasets` –Ω–∞ Hugging Face, –∑–∞ –¥–∞ —Å–≤–∞–ª–∏–º —Ä–µ—á–Ω–∏–∫, –∏–∑–≥—Ä–∞–¥–µ–Ω –æ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª–∏ –Ω–∞ *–ß–∏—Ç–∞–Ω–∫–∞*.  
  - –õ–∏–Ω–∫ –∫—ä–º –Ω–∞–±–æ—Ä–∞ –æ—Ç –¥–∞–Ω–Ω–∏: [vislupus/alpaca-bulgarian-dictionary](https://huggingface.co/datasets/vislupus/alpaca-bulgarian-dictionary)

- **–ó–∞—â–æ:** –¢–æ–∑–∏ —Ä–µ—á–Ω–∏–∫ —Å—ä–¥—ä—Ä–∂–∞ –¥—É–º–∏ —Å **—É–¥–∞—Ä–µ–Ω–∏—è** (–Ω–∞–ø—Ä. `—Ä—ä–∫–∞` vs `—Ä—ä–∫–∞` -> `—Ä—ä–∫–∞'`). –ë–µ–∑ –º–∞—Ä–∫–∏—Ä–∞–Ω–æ —É–¥–∞—Ä–µ–Ω–∏–µ eSpeak-NG —á–µ—Å—Ç–æ –Ω–µ –º–æ–∂–µ –¥–∞ –ø–æ–∑–Ω–∞–µ –ø—Ä–∞–≤–∏–ª–Ω–æ—Ç–æ –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏–µ.

- **üÜò –ê–∫–æ –ª–∏–Ω–∫—ä—Ç —É–º—Ä–µ:**
    1. –ù–∏–µ –ø–æ–ª–∑–≤–∞–º–µ `vislupus/alpaca-bulgarian-dictionary`.  
    2. –ê–∫–æ –≥–æ –∏–∑—Ç—Ä–∏—è—Ç, –ø–æ—Ç—ä—Ä—Å–µ—Ç–µ "Chitanka words list", "Bulgarian spellcheck dictionary" –∏–ª–∏ –ø–æ–¥–æ–±–Ω–∏.  
    3. –í—Å–µ–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤ —Ñ–∞–π–ª, –≤ –∫–æ–π—Ç–æ –¥—É–º–∏—Ç–µ –∏–º–∞—Ç —É–¥–∞—Ä–µ–Ω–∏—è, —â–µ —Å–≤—ä—Ä—à–∏ —Ä–∞–±–æ—Ç–∞ (—Ç—Ä—è–±–≤–∞ –¥–∞ –ø—Ä–æ–º–µ–Ω–∏—Ç–µ —Å–∞–º–æ `step1`).  

---

## üõ†Ô∏è –ò–∑–∏—Å–∫–≤–∞–Ω–∏—è

### 1. Python –∏ –Ω—É–∂–Ω–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

–ò–∑—Ç–µ–≥–ª–µ—Ç–µ –∏ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–π—Ç–µ **Python 3.10+**.  
–¢–µ—Å—Ç–≤–∞–Ω–æ —Å **Python 3.11+**.

–ò–Ω—Å—Ç–∞–ª–∏—Ä–∞–π—Ç–µ –Ω—É–∂–Ω–∏—Ç–µ –ø–∞–∫–µ—Ç–∏:

```bash
pip install requests tqdm datasets phonemizer
````

–∏–ª–∏:

```bash
pip install -r requirements.txt
```

### 2. Espeak-NG (–ó–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ!)

–¢–æ–≤–∞ –µ ‚Äû–¥–≤–∏–≥–∞—Ç–µ–ª—è—Ç‚Äú, –∫–æ–π—Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä–∞ —Ñ–æ–Ω–µ—Ç–∏–∫–∞—Ç–∞.

- **Windows:** –°–≤–∞–ª–µ—Ç–µ –∏ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–π—Ç–µ [eSpeak-NG (MSI)](https://github.com/espeak-ng/espeak-ng/releases).

  - –ó–∞–ø–æ–º–Ω–µ—Ç–µ –ø—ä—Ç—è (–Ω–∞–ø—Ä. `C:\Program Files\eSpeak NG`) –∏ –≥–æ –∑–∞–¥–∞–π—Ç–µ –≤ `step2_build_lexicon.py`, –∞–∫–æ –Ω–µ –±—ä–¥–µ –Ω–∞–º–µ—Ä–µ–Ω.

- **Linux:**

```bash
sudo apt install espeak-ng
```

---

## üöÄ –ö–∞–∫ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞ (–°—Ç—ä–ø–∫–∞ –ø–æ —Å—Ç—ä–ø–∫–∞)

### –°—Ç—ä–ø–∫–∞ 1: –ö–ª–æ–Ω–∏—Ä–∞–Ω–µ

```bash
git clone https://github.com/actepukc/bg_g2p_builder.git
cd bg_g2p_builder
```

–∏–ª–∏ —Å–≤–∞–ª–µ—Ç–µ ZIP –∏ –≥–æ —Ä–∞–∑–∞—Ä—Ö–∏–≤–∏—Ä–∞–π—Ç–µ.

### –°—Ç—ä–ø–∫–∞ 2: –°–≤–∞–ª—è–Ω–µ –Ω–∞ —Ä–µ—Å—É—Ä—Å–∏—Ç–µ

```bash
python step1_download_sources.py
```

–¢–æ–≤–∞ —â–µ —Å—ä–∑–¥–∞–¥–µ –ø–∞–ø–∫–∞ `output/` –∏ —â–µ –∑–∞–ø–∏—à–µ –≤ –Ω–µ—è:

- `bg_kaikki.jsonl`
- `dictionary_with_stress.tsv`

–í—Å–µ–∫–∏ —Å–ª–µ–¥–≤–∞—â —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä—è–≤–∞ –¥–∞–ª–∏ –ø—Ä–µ–¥–∏—à–Ω–∏—Ç–µ —Å–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏ –∏ –ø–æ–∫–∞–∑–≤–∞ —è—Å–Ω–æ —Å—ä–æ–±—â–µ–Ω–∏–µ, –∞–∫–æ –ª–∏–ø—Å–≤–∞ –Ω—É–∂–Ω–∏—è—Ç —Ñ–∞–π–ª.

### –°—Ç—ä–ø–∫–∞ 3: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ —Å–ª–∏–≤–∞–Ω–µ

```bash
python step2_build_lexicon.py
```

### –°—Ç—ä–ø–∫–∞ 4: –§–∏–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–µ

```bash
python step3_polish_lexicon.py
```

üéâ –ì–æ—Ç–æ–≤–æ ‚Äî —Ñ–∏–Ω–∞–ª–Ω–∏—è—Ç —Ñ–∞–π–ª –µ **`lexicon.tsv`**.

---

## üìÑ –§–æ—Ä–º–∞—Ç –Ω–∞ `lexicon.tsv`

–§–∞–π–ª—ä—Ç –µ —Ç–∞–±-—Ä–∞–∑–¥–µ–ª–µ–Ω —Å –¥–≤–µ –∫–æ–ª–æ–Ω–∏:

1. **word** ‚Äì –¥—É–º–∞ –≤ –ø—Ä–∞–≤–æ–ø–∏—Å–Ω–∞ —Ñ–æ—Ä–º–∞
2. **ipa** ‚Äì IPA —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è, —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏

–ü—Ä–∏–º–µ—Ä:

```tsv
–¥—É–º–∞<TAB>d u m a
```

```tsv
–≤—ä–ª–Ω–∞    v …ê …´ n Àà a
–≤—äÃÄ–ª–Ω–∞    Àà v …§ …´ n …ê
—â–µ—Ä—è–Ω     É t …õ r Àà j a n
```

---

## üìö –ò–∑—Ç–æ—á–Ω–∏—Ü–∏ –∏ –õ–∏—Ü–µ–Ω–∑–∏

- **Wiktionary Data:** [Kaikki.org](https://kaikki.org/) ‚Äî –ª–∏—Ü–µ–Ω–∑ CC-BY-SA.
- **Stress Data:** [vislupus/alpaca-bulgarian-dictionary](https://huggingface.co/datasets/vislupus/alpaca-bulgarian-dictionary) ‚Äî –≤–∞–∂–∞—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ç–µ –Ω–∞ dataset-–∞.
- **IPA –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è:** –§–æ–Ω–µ—Ç–∏—á–Ω–∏ –ø—Ä–∞–≤–∏–ª–∞: –ë–∞–∑–∏—Ä–∞–Ω–∏ –Ω–∞ —Å—ä–≤—Ä–µ–º–µ–Ω–Ω–∏—Ç–µ –∞–∫–∞–¥–µ–º–∏—á–Ω–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏ –∑–∞ –±—ä–ª–≥–∞—Ä—Å–∫–∏ IPA.

–ê–∫–æ –ø–æ–ª–∑–≤–∞—Ç–µ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–∏—è —Ä–µ—á–Ω–∏–∫ –≤ —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç, —É–≤–µ—Ä–µ—Ç–µ —Å–µ, —á–µ —Å–ø–∞–∑–≤–∞—Ç–µ —É—Å–ª–æ–≤–∏—è—Ç–∞ –Ω–∞ –≤—Å–∏—á–∫–∏ –∏–∑—Ç–æ—á–Ω–∏—Ü–∏.

---

## ‚ùì –ó–∞—â–æ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞ —Ç–æ–∑–∏ –ø—Ä–æ–µ–∫—Ç?

–ü—Ä–æ–µ–∫—Ç—ä—Ç –µ —Å—ä–∑–¥–∞–¥–µ–Ω —Å–ª–µ–¥ —Ä–∞–±–æ—Ç–∞ –≤—ä—Ä—Ö—É –æ–±–æ–≥–∞—Ç—è–≤–∞–Ω–µ –Ω–∞ –¥–∞—Ç–∞—Å–µ—Ç–∞ –∑–∞ [goruut/dataset](https://github.com/neurlang/dataset) –∏ –Ω—É–∂–¥–∞—Ç–∞ –æ—Ç —Å—Ç–∞–±–∏–ª–µ–Ω, –ø—É–±–ª–∏—á–µ–Ω –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ–¥–¥—ä—Ä–∂–∞–Ω –±—ä–ª–≥–∞—Ä—Å–∫–∏ G2P —Ä–µ—á–Ω–∏–∫.
